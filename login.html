<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Login — AuraSense</title>
  <meta name="description" content="Sign in to AuraSense to access resources and personalization.">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body class="login-page">
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="logo" href="login.html" aria-label="AuraSense — login page">
        <svg class="eye-icon" width="28" height="28" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" role="img" focusable="false" aria-hidden="true">
          <defs>
            <linearGradient id="irisGlogin" x1="0" x2="1">
              <stop offset="0%" stop-color="#00a896"/>
              <stop offset="100%" stop-color="#0066cc"/>
            </linearGradient>
          </defs>
          <g fill="none" stroke="none">
            <path d="M32 16C20 16 9.666 24.333 4 32c5.666 7.666 16 16 28 16s22.334-8.334 28-16C54.334 24.333 44 16 32 16z" fill="#eaf6fb"/>
            <ellipse cx="32" cy="32" rx="10" ry="10" fill="url(#irisGlogin)"/>
            <circle cx="32" cy="32" r="5" fill="#041b3b"/>
          </g>
        </svg>
        <span class="logo-text">AuraSense</span>
      </a>
    </div>
  </header>

  <main role="main" class="container">
    <div class="login-card" role="region" aria-labelledby="login-heading">
      <div class="login-hero">
        <div class="login-brand">
          <div class="login-showcase" role="img" aria-labelledby="login-heading login-tagline">
            <div class="showcase-logo" aria-hidden="true">
              <svg width="72" height="72" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" focusable="false">
                <defs>
                  <linearGradient id="lg-show" x1="0" x2="1">
                    <stop offset="0%" stop-color="#00a896"/>
                    <stop offset="100%" stop-color="#0066cc"/>
                  </linearGradient>
                </defs>
                <rect rx="12" width="64" height="64" fill="url(#lg-show)" opacity="0.98"/>
                <g transform="translate(6,6)" fill="none" stroke="none">
                  <path d="M26 6C14 6 3.666 14.333 0 22c3.666 7.666 14 16 26 16s22.334-8.334 26-16C48.334 14.333 38 6 26 6z" fill="#eaf6fb"/>
                  <ellipse cx="26" cy="26" rx="8" ry="8" fill="#fff" opacity="0.06"/>
                  <ellipse cx="26" cy="26" rx="8" ry="8" fill="url(#lg-show)"/>
                  <circle cx="26" cy="26" r="4" fill="#041b3b"/>
                </g>
              </svg>
            </div>
            <div>
              <h2 id="login-heading">Welcome to AuraSense</h2>
              <p id="login-tagline" class="lead">Where accessibility meets trusted authentication</p>
              <p class="hint">Sign in to unlock personalized tools, saved guides, and workshops.</p>
            </div>
          </div>
        </div>
        <p class="login-note">AuraSense focuses on accessible, privacy-respecting features for people with visual impairments. Signing in unlocks personalized help, saved tutorials, and workshop signups.</p>
      </div>

      <form id="loginForm" class="login-form" aria-labelledby="login-heading" novalidate>
        <label for="email">Email</label>
        <input id="email" name="email" type="email" inputmode="email" autocomplete="email" required aria-describedby="emailHelp" aria-invalid="false">
        <div id="emailHelp" class="field-help" aria-live="polite"></div>

        <label for="password">Password <span id="pwdCounter" class="pwd-counter" aria-hidden="true">0 / 8</span></label>
        <input id="password" name="password" type="password" maxlength="8" autocomplete="current-password" required aria-describedby="pwdHelp pwdCounter" aria-invalid="false">
        <ul id="pwdHelp" class="validation-list" aria-live="polite">
          <li id="pwd-letter" class="invalid"><span class="dot">✕</span>contains a letter</li>
          <li id="pwd-digit" class="invalid"><span class="dot">✕</span>contains a digit</li>
          <li id="pwd-special" class="invalid"><span class="dot">✕</span>contains a special character</li>
          <li id="pwd-length" class="invalid"><span class="dot">✕</span>8 characters or fewer</li>
        </ul>

        <div style="display:flex;gap:.5rem;align-items:center;margin-top:.5rem;">
          <input id="remember" name="remember" type="checkbox">
          <label for="remember">Remember me</label>
        </div>

        <div class="actions">
          <button type="submit" class="submit" disabled>Sign in</button>
          <button type="button" id="guest" class="login-guest">Continue as guest</button>
        </div>

        <p class="login-note">Don't have an account? <a href="#">Contact us</a> to request access.</p>
        <div id="loginError" role="status" aria-live="polite" style="color:#b00020;margin-top:.6rem"></div>
      </form>
    </div>
  </main>

  <script>
    // Simple front-end login handler (demo): stores a flag in localStorage and redirects back to home
    (function(){
      const form = document.getElementById('loginForm');
      const guest = document.getElementById('guest');
      const error = document.getElementById('loginError');
      const email = document.getElementById('email');
      const pwd = document.getElementById('password');
      const submit = form.querySelector('.submit');
      const pwdCounter = document.getElementById('pwdCounter');


      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      function validateEmail(v){ return emailRegex.test(v); }
      function validatePassword(v){
        return {
          letter: /[A-Za-z]/.test(v),
          digit: /\d/.test(v),
          special: /[^A-Za-z0-9]/.test(v),
          length: v.length > 0 && v.length <= 8
        };
      }

      function updateEmailUI(){
        const v = email.value.trim();
        const help = document.getElementById('emailHelp');
        if(!v){ help.textContent = ''; email.classList.remove('input-error'); email.setAttribute('aria-invalid','false'); return; }
        if(!validateEmail(v)){
          help.textContent = 'Please enter a valid email like abc@gmail.com';
          email.classList.add('input-error');
          email.setAttribute('aria-invalid','true');
        } else {
          help.textContent = '';
          email.classList.remove('input-error');
          email.setAttribute('aria-invalid','false');
        }
      }

      function updatePwdUI(){
        const v = pwd.value;
        const res = validatePassword(v);
        const map = {letter:'pwd-letter',digit:'pwd-digit',special:'pwd-special',length:'pwd-length'};
        let all=true;
        Object.keys(map).forEach(k=>{
          const el = document.getElementById(map[k]);
          if(res[k]){ el.classList.remove('invalid'); el.classList.add('valid'); el.querySelector('.dot').textContent = '✓'; }
          else { el.classList.remove('valid'); el.classList.add('invalid'); el.querySelector('.dot').textContent = '✕'; all=false; }
        });
        // live character counter
        if(pwdCounter){ pwdCounter.textContent = v.length + ' / 8'; }
        // mark field error state
        if(!all){ pwd.classList.add('input-error'); pwd.setAttribute('aria-invalid','true'); }
        else { pwd.classList.remove('input-error'); pwd.setAttribute('aria-invalid','false'); }
        // enable submit only when email valid and pwd all good
        const emailOk = validateEmail(email.value.trim());
        submit.disabled = !(emailOk && all);
      }

      email.addEventListener('input', ()=>{ updateEmailUI(); updatePwdUI(); error.textContent = ''; });
      pwd.addEventListener('input', ()=>{ updatePwdUI(); error.textContent = ''; });

      form.addEventListener('submit', function(e){
        e.preventDefault();
        const emailVal = email.value.trim();
        const passVal = pwd.value || '';
        const remember = form.remember.checked;
        const emailOk = validateEmail(emailVal);
        const pwdRes = validatePassword(passVal);
        const pwdAll = pwdRes.letter && pwdRes.digit && pwdRes.special && pwdRes.length;
        if(!emailOk || !pwdAll){
          error.textContent = 'Please provide a valid email and a password that meets all requirements.';
          // focus first invalid
          if(!emailOk) email.focus(); else pwd.focus();
          return;
        }
        // NOTE: This is a demo placeholder. Replace with real authentication for production.
        try{
          localStorage.setItem('aurasense_logged_in', 'true');
          if(remember){ localStorage.setItem('aurasense_user', emailVal); }
        } catch(e){ /* ignore storage failure */ }
        window.location.replace('index.html');
      });

      guest.addEventListener('click', function(){
        localStorage.setItem('aurasense_logged_in', 'true');
        window.location.replace('index.html');
      });

      // If already logged in, skip to home
      try{ if(localStorage.getItem('aurasense_logged_in') === 'true') window.location.replace('index.html'); }catch(e){}

      // initial UI update
      updateEmailUI(); updatePwdUI();
    })();
  </script>
</body>
</html>